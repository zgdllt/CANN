//-------------------------------------------------------------------------------------------------------------------
//【文件名】Synapse.cpp
//【功能模块和目的】突触类的实现，包含突触连接和信号传递的所有功能实现
//【开发者及日期】李孟涵 2025年7月21日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------

#include "Synapse.hpp" // 包含突触类头文件

//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::Synapse
//【函数功能】Synapse类的默认构造函数，初始化突触的基本属性
//【参数】无
//【返回值】无
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
Synapse::Synapse()
    : pre(nullptr)
    , nxt(nullptr)
    , weight(1.0)
    , input(0.0)
{}

//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::Synapse
//【函数功能】Synapse类的带参构造函数，初始化突触的连接和权重
//【参数】input - 输入信号，weight - 权重，pre - 前置神经元指针，nxt - 后置神经元指针
//【返回值】无
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
Synapse::Synapse(double input, double weight, Neuron* pre, Neuron* nxt)
    : pre(pre)
    , nxt(nxt)
    , weight(weight)
    , input(input)
{}
//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::getWeight
//【函数功能】获取突触的权重值
//【参数】无
//【返回值】double - 突触的权重值
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
double Synapse::getWeight() const {
    return weight;
}
//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::getInput
//【函数功能】获取突触的输入信号值
//【参数】无
//【返回值】double - 输入信号值
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
double Synapse::getInput() const {
    return input;
}

//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::getSignal
//【函数功能】计算并返回突触的信号值
//【参数】无
//【返回值】double - 突触的信号值
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
double Synapse::getSignal() const {
    return input * weight; // 信号不作为变量，而是在需要时实时计算
}
//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::setWeight
//【函数功能】设置突触的权重值
//【参数】weight - 突触的权重值
//【返回值】无
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
void Synapse::setWeight(double weight) {
    this->weight = weight;
}

//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::setInput
//【函数功能】设置突触的输入信号值
//【参数】input - 输入信号值
//【返回值】无
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
void Synapse::setInput(double input) {
    this->input = input;
}

//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::getPre
//【函数功能】获取前驱神经元指针
//【参数】无
//【返回值】Neuron* - 前驱神经元指针
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
Neuron* Synapse::getPre() const {
    return pre;
}

//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::getNxt
//【函数功能】获取后继神经元指针
//【参数】无
//【返回值】Neuron* - 后继神经元指针
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
Neuron* Synapse::getNxt() const {
    return nxt;
}

//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::setPre
//【函数功能】设置前驱神经元指针
//【参数】pre - 前驱神经元指针
//【返回值】无
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
void Synapse::setPre(Neuron* pre) {
    this->pre = pre;
}

//-------------------------------------------------------------------------------------------------------------------
//【函数名称】Synapse::setNxt
//【函数功能】设置后继神经元指针
//【参数】nxt - 后继神经元指针
//【返回值】无
//【开发者及日期】李孟涵 2025年7月13日
//【更改记录】无
//-------------------------------------------------------------------------------------------------------------------
void Synapse::setNxt(Neuron* nxt) {
    this->nxt = nxt;
}